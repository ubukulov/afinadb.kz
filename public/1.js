(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2:function(t,a,e){"use strict";function s(t,a,e,s,i,n,o,r){var l,c="function"==typeof t?t.options:t;if(a&&(c.render=a,c.staticRenderFns=e,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,a){return l.call(a),d(t,a)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}e.d(a,"a",(function(){return s}))},22:function(t,a,e){"use strict";var s=e(5);e.n(s).a},23:function(t,a,e){(t.exports=e(7)(!1)).push([t.i,"\n.ban[data-v-2849323d] {\n    color: #ccc !important;\n}\n",""])},27:function(t,a,e){"use strict";e.r(a);var s=e(0),i=e.n(s),n={data:function(){return{users:[],modalTitle:"Редактировать профиль",buttonTitle:"Изменить данные",id:"",firstName:"",lastName:"",username:"",password:"",status:"",city_id:0,selectedCity:0,company_id:1,editProfile:!0,pagination:{}}},props:["companies","cities"],methods:{addAccount:function(){this.editProfile=!1,this.modalTitle="Добавить учетную запись",this.buttonTitle="Добавить",this.firstName="",this.lastName="",this.username="",this.password="",$("#modal_lead").removeClass("fade").modal("toggle")},editAccount:function(t){var a=this;this.editProfile=!0,this.modalTitle="Редактировать профиль",this.buttonTitle="Изменить данные",i.a.get("/api/user/"+t).then((function(t){a.id=t.data.id,a.firstName=t.data.name,a.lastName=t.data.last_name,a.username=t.data.email,a.password=t.data.password,a.status=t.data.status,a.city_id=t.data.city_id,a.selectedCity=t.data.city_id,a.company_id=t.data.company_id})).catch((function(t){console.log(t)})),$("#modal_lead").removeClass("fade").modal("toggle")},updateAccount:function(){var t=this;i.a.post("/api/user/update",{id:this.id,name:this.firstName,last_name:this.lastName,email:this.username,password:this.password,status:this.status,city_id:this.city_id,company_id:this.company_id}).then((function(a){console.log(a),$("#modal_lead").addClass("fade").modal("toggle"),t.getUsers()})).catch((function(t){console.log(t)}))},storeAccount:function(){var t=this;i.a.post("/api/user/create",{name:this.firstName,last_name:this.lastName,email:this.username,password:this.password,status:this.status,city_id:this.selectedCity,company_id:this.company_id}).then((function(a){console.log(a),$("#modal_lead").addClass("fade").modal("toggle"),t.getUsers()})).catch((function(t){console.log(t)}))},getUsers:function(t){var a,e=this;t=t||"/api/users",i.a.get(t).then((function(t){e.users=t.data.data,console.log(t),a={prev_page_url:t.data.links.prev,next_page_url:t.data.links.next,last_page_url:t.data.links.last,first_page_url:t.data.links.first,current_page:t.data.meta.current_page,last_page:t.data.meta.last_page},e.pagination=a})).catch((function(t){console.log(t)}))},changeDeleted:function(t){var a=this;i.a.post("/call_center/user/ban",{user_id:t}).then((function(t){console.log(t),a.getUsers()})).catch((function(t){console.log(t)}))}},created:function(){this.users=this.getUsers()},mounted:function(){console.log("Component mounted.")}},o=(e(22),e(2)),r=Object(o.a)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"content_title"},[t._v("\n        Учетные записи менеджеров\n\n        "),e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.addAccount()}}},[e("i",{staticClass:"fas phpdebugbar-fa-edit"}),t._v(" Добавить учетную запись")])]),t._v(" "),e("nav",{attrs:{"aria-label":"..."}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.prev_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(a){return t.getUsers(t.pagination.prev_page_url)}}},[t._v("Предыдущая")])]),t._v(" "),t._l(t.pagination.last_page,(function(a){return e("li",{staticClass:"page-item",class:[{disabled:a==t.pagination.current_page}]},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.getUsers("/api/users?page="+a)}}},[t._v("\n                    "+t._s(a)+"\n                    "),a==t.pagination.current_page?e("span",{staticClass:"sr-only"},[t._v("(current)")]):t._e()])])})),t._v(" "),e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.next_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return t.getUsers(t.pagination.next_page_url)}}},[t._v("Следующая")])])],2)]),t._v(" "),e("table",{staticClass:"table leads_table table-bordered table-striped"},[t._m(0),t._v(" "),e("tbody",t._l(t.users,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.id))]),t._v(" "),e("td",[t._v(t._s(a.email))]),t._v(" "),e("td",[t._v(t._s(a.password))]),t._v(" "),e("td",[t._v(t._s(a.name+" "+a.last_name))]),t._v(" "),e("td",[t._v(t._s(a.status))]),t._v(" "),e("td",["0"==a.deleted?e("span",[t._v("Заблокирован")]):t._e(),t._v(" "),"1"==a.deleted?e("span",[t._v("Активно")]):t._e()]),t._v(" "),e("td",{staticClass:"accounts_btn"},[e("button",{attrs:{type:"button"},on:{click:function(e){return t.editAccount(a.id)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),e("button",{attrs:{type:"button"},on:{click:function(e){return t.changeDeleted(a.id)}}},[e("i",{staticClass:"fas fa-power-off",class:[{ban:"0"==a.deleted}]})]),t._v(" "),t._m(1,!0)])])})),0)]),t._v(" "),e("nav",{attrs:{"aria-label":"..."}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.prev_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(a){return t.getUsers(t.pagination.prev_page_url)}}},[t._v("Предыдущая")])]),t._v(" "),t._l(t.pagination.last_page,(function(a){return e("li",{staticClass:"page-item",class:[{disabled:a==t.pagination.current_page}]},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.getUsers("/api/users?page="+a)}}},[t._v("\n                    "+t._s(a)+"\n                    "),a==t.pagination.current_page?e("span",{staticClass:"sr-only"},[t._v("(current)")]):t._e()])])})),t._v(" "),e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.next_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return t.getUsers(t.pagination.next_page_url)}}},[t._v("Следующая")])])],2)]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"modal_lead",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v(t._s(t.modalTitle))]),t._v(" "),t._m(2)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"first_name"}},[t._v("Имя")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"text",id:"first_name"},domProps:{value:t.firstName},on:{input:function(a){a.target.composing||(t.firstName=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"last_name"}},[t._v("Фамилия")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",id:"last_name"},domProps:{value:t.lastName},on:{input:function(a){a.target.composing||(t.lastName=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Логин")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(a){a.target.composing||(t.username=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"password"}},[t._v("Пароль")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"text",id:"password"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"type"}},[t._v("Роль в системе")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"form-control",attrs:{id:"type"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.status=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"MANAGER"}},[t._v("MANAGER")]),t._v(" "),e("option",{attrs:{value:"TRAINEE"}},[t._v("TRAINEE")]),t._v(" "),e("option",{attrs:{value:"CALL_CENTER"}},[t._v("CALL_CENTER")]),t._v(" "),e("option",{attrs:{value:"FRANCHISE_MANAGER"}},[t._v("FRANCHISE_MANAGER")]),t._v(" "),e("option",{attrs:{value:"FRANCHISE_DIRECTOR"}},[t._v("FRANCHISE_DIRECTOR")])])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"company_id"}},[t._v("Укажите компанию")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.company_id,expression:"company_id"}],staticClass:"form-control",attrs:{id:"company_id"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.company_id=a.target.multiple?e:e[0]}}},t._l(t.companies,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.title))])})),0)]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"city_id"}},[t._v("Укажите город")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCity,expression:"selectedCity"}],staticClass:"form-control",attrs:{id:"city_id"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedCity=a.target.multiple?e:e[0]}}},t._l(t.cities,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.title))])})),0)])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"send_btn"},on:{click:function(a){t.editProfile?t.updateAccount():t.storeAccount()}}},[t._v(t._s(t.buttonTitle))])])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"thead-light"},[e("th",{attrs:{width:"100"}},[t._v("#ID")]),t._v(" "),e("th",{attrs:{width:"100"}},[t._v("Логин")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("Пароль")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("ФИО")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("Роль в системе")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("Статус")]),t._v(" "),e("th",[t._v("Действие")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{attrs:{type:"button"}},[a("i",{staticClass:"fas fa-trash-alt"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,"2849323d",null);a.default=r.exports},5:function(t,a,e){var s=e(23);"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e(8)(s,i);s.locals&&(t.exports=s.locals)}}]);