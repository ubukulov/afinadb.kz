(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{2:function(t,a,e){"use strict";function n(t,a,e,n,s,i,r,l){var o,c="function"==typeof t?t.options:t;if(a&&(c.render=a,c.staticRenderFns=e,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),r?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=o):s&&(o=l?function(){s.call(this,this.$root.$options.shadowRoot)}:s),o)if(c.functional){c._injectStyles=o;var d=c.render;c.render=function(t,a){return o.call(a),d(t,a)}}else{var _=c.beforeCreate;c.beforeCreate=_?[].concat(_,o):[o]}return{exports:t,options:c}}e.d(a,"a",(function(){return n}))},31:function(t,a,e){"use strict";e.r(a);var n=e(0),s=e.n(n),i={data:function(){return{leads:[],managers:[],pagination:{},modalTitle:"ВЫБЕРИТЕ МЕНЕДЖЕРА ДЛЯ ЗАПРОСА",manager_id:0,city_id:0}},props:{sourceList:Array,companies:Array,cities:Array},methods:{getLeads:function(t){var a=this;t=t||"/director/leads/list",s.a.get(t).then((function(t){a.leads=t.data.data,a.makePagination(t.data.links,t.data.meta)})).catch((function(t){console.log(t)}))},makePagination:function(t,a){var e;e={prev_page_url:t.prev,next_page_url:t.next,last_page_url:t.last,first_page_url:t.first,current_page:a.current_page,last_page:a.last_page},this.pagination=e,console.log(e)},getManagers:function(){var t=this;s.a.get("/api/managers").then((function(a){t.managers=a.data.data})).catch((function(t){console.log(t)}))},setLeadForManager:function(){var t=this;s.a.post("/call_center/manager/set/lead",{lead_id:$("#send_btn").data("id"),manager_id:this.manager_id,_token:$("input[name='_token']").attr("content")}).then((function(a){t.getLeads(),$("#modal_lead").addClass("fade").modal("toggle"),console.log(a)})).catch((function(t){console.log(t)}))},selectManager:function(t){$("#send_btn").data("id",t),$("#modal_lead").removeClass("fade").modal("toggle"),this.modalTitle=this.modalTitle+" #"+t},getObjectValue:function(t,a){return t.find((function(t){return t.id===a})).title}},created:function(){this.leads=this.getLeads(),this.managers=this.getManagers()}},r=e(2),l=Object(r.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"..."}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.prev_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(a){return t.getLeads(t.pagination.prev_page_url)}}},[t._v("Предыдущая")])]),t._v(" "),t._l(t.pagination.last_page,(function(a){return e("li",{staticClass:"page-item",class:[{disabled:a==t.pagination.current_page}]},[a<=10?e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.getLeads("/director/leads/list?page="+a)}}},[t._v("\n                    "+t._s(a)+"\n                    "),a==t.pagination.current_page?e("span",{staticClass:"sr-only"},[t._v("(current)")]):t._e()]):t._e()])})),t._v(" "),e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.next_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return t.getLeads(t.pagination.next_page_url)}}},[t._v("Следующая")])])],2)]),t._v(" "),e("table",{staticClass:"table leads_table table-bordered table-striped"},[t._m(0),t._v(" "),e("tbody",t._l(t.leads,(function(a){return e("tr",[e("td",[t._v(t._s(a.dt+" #"+a.id+" ("+a.dn+") дней"))]),t._v(" "),e("td",[t._v(t._s(t.sourceList[a.type]))]),t._v(" "),e("td",[t._v(t._s(a.comment))]),t._v(" "),e("td",[t._v("\n                Новые\n            ")])])})),0)]),t._v(" "),e("nav",{attrs:{"aria-label":"..."}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.prev_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(a){return t.getLeads(t.pagination.prev_page_url)}}},[t._v("Предыдущая")])]),t._v(" "),t._l(t.pagination.last_page,(function(a){return e("li",{staticClass:"page-item",class:[{disabled:a==t.pagination.current_page}]},[a<=10?e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.getLeads("/director/leads/list?page="+a)}}},[t._v("\n                    "+t._s(a)+"\n                    "),a==t.pagination.current_page?e("span",{staticClass:"sr-only"},[t._v("(current)")]):t._e()]):t._e()])})),t._v(" "),e("li",{staticClass:"page-item",class:[{disabled:!t.pagination.next_page_url}]},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return t.getLeads(t.pagination.next_page_url)}}},[t._v("Следующая")])])],2)])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("thead",{staticClass:"thead-light"},[a("th",{attrs:{width:"100"}},[this._v("Дата")]),this._v(" "),a("th",{attrs:{width:"150"}},[this._v("Источник")]),this._v(" "),a("th",{attrs:{width:"250"}},[this._v("Комментарии")]),this._v(" "),a("th",{attrs:{width:"200"}},[this._v("Статус")])])}],!1,null,null,null);a.default=l.exports}}]);