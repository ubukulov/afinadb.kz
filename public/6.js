(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{2:function(t,a,e){"use strict";function s(t,a,e,s,i,n,l,o){var d,r="function"==typeof t?t.options:t;if(a&&(r.render=a,r.staticRenderFns=e,r._compiled=!0),s&&(r.functional=!0),n&&(r._scopeId="data-v-"+n),l?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},r._ssrRegister=d):i&&(d=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),d)if(r.functional){r._injectStyles=d;var c=r.render;r.render=function(t,a){return d.call(a),c(t,a)}}else{var _=r.beforeCreate;r.beforeCreate=_?[].concat(_,d):[d]}return{exports:t,options:r}}e.d(a,"a",(function(){return s}))},30:function(t,a,e){"use strict";e.r(a);var s=e(0),i=e.n(s),n={data:function(){return{leads:[],processing_leads:[],completing_leads:[],canceling_leads:[],modalTitle:"",comment:"",lead_id:0}},methods:{getMyLeads:function(){var t=this;i.a.get("/manager/my/leads").then((function(a){t.leads=a.data.data,t.processing_leads=t.leads.filter((function(t){return"1"===t.m_type})),t.completing_leads=t.leads.filter((function(t){return"0"===t.m_type})),t.canceling_leads=t.leads.filter((function(t){return"2"===t.m_type})),console.log(a)})).catch((function(t){console.log(t)}))},completeLead:function(t){var a=this;confirm("Вы точно хотите закрывать запрос?")&&i.a.post("/manager/change/lead/status",{lead_id:t,process:"complete"}).then((function(t){a.getMyLeads(),console.log(t)})).catch((function(t){console.log(t)}))},cancelLead:function(){var t=this;""!=this.comment.length&&i.a.post("/manager/change/lead/status",{lead_id:this.lead_id,process:"cancel",comment:this.comment}).then((function(a){t.getMyLeads(),console.log(a),$("#modal_lead").addClass("fade").modal("toggle")})).catch((function(t){console.log(t)}))},cancelLeadForm:function(t){this.modalTitle="ПРИЧИНА ОТКАЗА ОТ ЗАПРОСА #"+t,this.lead_id=t,$("#modal_lead").removeClass("fade").modal("toggle")},closeForm:function(){$("#modal_lead").addClass("fade").modal("toggle"),this.comment=""}},created:function(){this.getMyLeads()}},l=e(2),o=Object(l.a)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[e("div",{staticClass:"tab-pane fade show active",attrs:{id:"home",role:"tabpanel","aria-labelledby":"home-tab"}},[e("table",{staticClass:"table leads_table table-bordered table-striped"},[t._m(1),t._v(" "),e("tbody",t._l(t.processing_leads,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.id))]),t._v(" "),e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.phone))]),t._v(" "),e("td",[t._v(t._s(a.comment))]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.completeLead(a.id)}}},[e("i",{staticClass:"fas fa-check"}),t._v(" Выполнено")]),t._v(" "),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.cancelLeadForm(a.id)}}},[e("i",{staticClass:"fas fa-times"}),t._v("  Отказаться")])])])})),0)])]),t._v(" "),e("div",{staticClass:"tab-pane fade",attrs:{id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"}},[e("table",{staticClass:"table leads_table table-bordered table-striped"},[t._m(2),t._v(" "),e("tbody",t._l(t.completing_leads,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.id))]),t._v(" "),e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.phone))]),t._v(" "),e("td",[t._v(t._s(a.comment))])])})),0)])]),t._v(" "),e("div",{staticClass:"tab-pane fade",attrs:{id:"contact",role:"tabpanel","aria-labelledby":"contact-tab"}},[e("table",{staticClass:"table leads_table table-bordered table-striped"},[t._m(3),t._v(" "),e("tbody",t._l(t.canceling_leads,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.id))]),t._v(" "),e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.phone))]),t._v(" "),e("td",[t._v(t._s(a.comment))])])})),0)])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"modal_lead",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v(t._s(t.modalTitle))]),t._v(" "),t._m(4)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[t._m(5),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"comment_id"}}),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"comment_id",cols:"30",rows:"5"},domProps:{value:t.comment},on:{input:function(a){a.target.composing||(t.comment=a.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"col-md-6 text-right"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.closeForm()}}},[t._v("Отмена")])]),t._v(" "),e("div",{staticClass:"col-md-6 text-right"},[e("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.cancelLead()}}},[t._v("Отказаться от запроса")])])])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true"}},[this._v("В процессе")])]),this._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false"}},[this._v("Обработанные")])]),this._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:"contact-tab","data-toggle":"tab",href:"#contact",role:"tab","aria-controls":"contact","aria-selected":"false"}},[this._v("Необработанные")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"thead-light"},[e("th",{attrs:{width:"100"}},[t._v("Дата")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("Имя")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("Тел")]),t._v(" "),e("th",{attrs:{width:"250"}},[t._v("Комментарии")]),t._v(" "),e("th",[t._v("Действие")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",{staticClass:"thead-light"},[a("th",{attrs:{width:"100"}},[this._v("Дата")]),this._v(" "),a("th",{attrs:{width:"150"}},[this._v("Имя")]),this._v(" "),a("th",{attrs:{width:"150"}},[this._v("Тел")]),this._v(" "),a("th",{attrs:{width:"250"}},[this._v("Комментарии")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",{staticClass:"thead-light"},[a("th",{attrs:{width:"100"}},[this._v("Дата")]),this._v(" "),a("th",{attrs:{width:"150"}},[this._v("Имя")]),this._v(" "),a("th",{attrs:{width:"150"}},[this._v("Тел")]),this._v(" "),a("th",{attrs:{width:"250"}},[this._v("Комментарии")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("p",[this._v("Этот запрос будет обработан Колл - Центром! В связи с этим просим Вас описать причину отказа в разделе комментарий.")])])}],!1,null,null,null);a.default=o.exports}}]);